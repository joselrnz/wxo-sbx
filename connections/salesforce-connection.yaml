spec_version: v1
kind: connection
app_id: salesforce_connection
name: salesforce_connection
description: "Salesforce API connection with OAuth 2.0 authentication"
environments:
  draft:
    connection_type: oauth2
    base_url: "https://{{SALESFORCE_INSTANCE}}.salesforce.com"
    preference: team
    security_scheme: oauth2
    auth:
      type: oauth2
      grant_type: authorization_code
      client_id: "{{SALESFORCE_CLIENT_ID}}"
      client_secret: "{{SALESFORCE_CLIENT_SECRET}}"
      authorization_url: "https://{{SALESFORCE_INSTANCE}}.salesforce.com/services/oauth2/authorize"
      token_url: "https://{{SALESFORCE_INSTANCE}}.salesforce.com/services/oauth2/token"
      scope: "api refresh_token"
      redirect_uri: "{{SALESFORCE_REDIRECT_URI}}"
    headers:
      Content-Type: "application/json"
      Accept: "application/json"
      User-Agent: "Watson-x-Orchestrate/1.0"
    endpoints:
      # Common Salesforce REST API endpoints
      accounts: "/services/data/v58.0/sobjects/Account"
      contacts: "/services/data/v58.0/sobjects/Contact"
      opportunities: "/services/data/v58.0/sobjects/Opportunity"
      leads: "/services/data/v58.0/sobjects/Lead"
      cases: "/services/data/v58.0/sobjects/Case"
      query: "/services/data/v58.0/query"
      search: "/services/data/v58.0/search"
      describe: "/services/data/v58.0/sobjects"
