spec_version: v1
kind: connection
app_id: aws_connection
name: aws_connection
description: "Amazon Web Services API connection with AWS Signature V4 authentication"
environments:
  draft:
    kind: key_value
    type: team
    sso: false
    server_url: "https://{{AWS_SERVICE}}.{{AWS_REGION}}.amazonaws.com"
    headers:
      Content-Type: "application/json"
      Accept: "application/json"
      User-Agent: "Watson-x-Orchestrate/1.0"
    auth:
      type: key_value
      # AWS credentials for Signature V4
      access_key_id: "{{AWS_ACCESS_KEY_ID}}"
      secret_access_key: "{{AWS_SECRET_ACCESS_KEY}}"
      region: "{{AWS_REGION}}"
      service: "{{AWS_SERVICE}}"  # e.g., s3, ec2, lambda, etc.
      # Optional for temporary credentials
      session_token: "{{AWS_SESSION_TOKEN}}"
    endpoints:
      # Common AWS service endpoints (examples)
      # S3
      s3_buckets: "/"  # For S3: https://s3.region.amazonaws.com/
      # EC2
      ec2_instances: "/?Action=DescribeInstances&Version=2016-11-15"
      # Lambda
      lambda_functions: "/2015-03-31/functions"
      # CloudWatch
      cloudwatch_metrics: "/?Action=ListMetrics&Version=2010-08-01"
